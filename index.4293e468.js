const e=new class{constructor(e=4){this.size=e,this.score=0,this.gameField=Array.from({length:this.size},()=>Array(this.size).fill(0))}removeZeros(e){return e.filter(e=>0!==e)}},r=document.querySelector(".start"),t=document.querySelectorAll(".field-row"),o=document.querySelector(".game-score"),n=document.querySelector(".message-start"),s=document.querySelector(".hidden"),i=document.querySelector(".message-win"),l=e.size;let c=e.score,a=e.gameField;function f(){for(let e=0;e<l;e++)for(let r=0;r<l;r++){2048===a[e][r]&&i.classList.remove("hidden");let o=t[e].children[r],n=o.textContent=a[e][r]||"";o.className=n?`field-cell field-cell--${n}`:"field-cell"}o.innerText=c}function d(){let e=Math.floor(Math.random()*l),r=Math.floor(Math.random()*l);0===a[e][r]?a[e][r]=.1>Math.random()?4:2:d()}function m(){let e=!1,r=!1,t=!1;if(a.every(e=>a.every((r,t)=>e[t]>0))){t=!0;for(let r=0;r<4;r++){let t=a[r];for(let r=0;r<4;r++)t[r]===t[r+1]&&(e=!0)}a=u(a);for(let e=0;e<4;e++){let t=a[e];for(let e=0;e<4;e++)t[e]===t[e+1]&&(r=!0)}}e||r||!t||s.classList.remove("hidden")}function u(e){return e.map((r,t)=>e.map(e=>e[t]))}function h(e){let r=!1;for(let t=0;t<e.length-1;t++)e[t]===e[t+1]?(e[t]*=2,e.splice(t+1,1),c+=e[t],r=!0):0===e[t]&&0===e[t+1]&&(r=!1);for(;e.length<l;)e.push(0);return{row:e,moved:r}}function v(r){switch(r.key){case"ArrowLeft":!function(){let r=!1;for(let t=0;t<l;t++){let o=[...a[t]],n=e.removeZeros(a[t]),s=h(n);a[t]=n,(s.moved||JSON.stringify(o)!==JSON.stringify(s.row))&&(r=!0)}r&&(d(),m()),f()}();break;case"ArrowRight":!function(){let r=!1;for(let t=0;t<l;t++){let o=[...a[t]],n=h(e.removeZeros(a[t].reverse()));a[t]=n.row.reverse(),(n.moved||JSON.stringify(o)!==JSON.stringify(n.row))&&(r=!0)}r&&(d(),m()),f()}();break;case"ArrowUp":!function(){let r=!1;a=u(a);for(let t=0;t<l;t++){let o=[...a[t]],n=h(e.removeZeros(a[t]));a[t]=n.row,(n.moved||JSON.stringify(o)!==JSON.stringify(n.row))&&(r=!0)}a=u(a),r&&(d(),m()),f()}();break;case"ArrowDown":!function(){let r=!1;a=u(a);for(let t=0;t<l;t++){let o=[...a[t]],n=h(e.removeZeros(a[t].reverse()));a[t]=n.row.reverse(),(n.moved||JSON.stringify(o)!==JSON.stringify(n.row))&&(r=!0)}a=u(a),r&&(d(),m()),f()}()}}r.addEventListener("click",()=>{document.addEventListener("keydown",v),n.hidden=!0,"Start"===r.innerText?(r.innerText="Restart",r.classList.replace("start","restart")):(s.classList.add("hidden"),a=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]]),d(),d(),f()});
//# sourceMappingURL=index.4293e468.js.map
